!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).virtualList=e()}(this,(function(){"use strict";var t,e=function(t){return"object"==typeof t?null!==t:"function"==typeof t},n=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},i=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},r=function(t){return Object(i(t))},o=Math.ceil,s=Math.floor,a=function(t){return isNaN(t=+t)?0:(t>0?s:o)(t)},c=Math.min,u=function(t){return t>0?c(a(t),9007199254740991):0},l=(t=!0,function(e,n){var r,o,s=String(i(e)),c=a(n),u=s.length;return c<0||c>=u?t?"":void 0:(r=s.charCodeAt(c))<55296||r>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):r:t?s.slice(c,c+2):o-56320+(r-55296<<10)+65536}),f=function(t,e,n){return e+(n?l(t,e).length:1)},h={}.toString,p=function(t){return h.call(t).slice(8,-1)};function d(t,e){return t(e={exports:{}},e.exports),e.exports}var v,g,m=d((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),y=(m.version,d((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),S=d((function(t){var e=y["__core-js_shared__"]||(y["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:m.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),b=0,_=Math.random(),x=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++b+_).toString(36))},w=d((function(t){var e=S("wks"),n=y.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:x)("Symbol."+t))}).store=e})),E=w("toStringTag"),T="Arguments"==p(function(){return arguments}()),k=RegExp.prototype.exec,C=function(t,e){var n,i,r,o,s=t.exec;if("function"==typeof s){var a=s.call(t,e);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(i=Object(n),E))?r:T?p(i):"Object"==(o=p(i))&&"function"==typeof i.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return k.call(t,e)},D=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},$=RegExp.prototype.exec,O=String.prototype.replace,M=$,L=(v=/a/,g=/b*/g,$.call(v,"a"),$.call(g,"a"),0!==v.lastIndex||0!==g.lastIndex),I=void 0!==/()??/.exec("")[1];(L||I)&&(M=function(t){var e,n,i,r,o=this;return I&&(n=new RegExp("^"+o.source+"$(?!\\s)",D.call(o))),L&&(e=o.lastIndex),i=$.call(o,t),L&&i&&(o.lastIndex=o.global?i.index+i[0].length:e),I&&i&&i.length>1&&O.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i});var P=M,N=function(t){try{return!!t()}catch(t){return!0}},j=!N((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),A=y.document,R=e(A)&&e(A.createElement),F=function(t){return R?A.createElement(t):{}},z=!j&&!N((function(){return 7!=Object.defineProperty(F("div"),"a",{get:function(){return 7}}).a})),V=function(t,n){if(!e(t))return t;var i,r;if(n&&"function"==typeof(i=t.toString)&&!e(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!e(r=i.call(t)))return r;if(!n&&"function"==typeof(i=t.toString)&&!e(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")},G=Object.defineProperty,B={f:j?Object.defineProperty:function(t,e,i){if(n(t),e=V(e,!0),n(i),z)try{return G(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},H=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},U=j?function(t,e,n){return B.f(t,e,H(1,n))}:function(t,e,n){return t[e]=n,t},Y={}.hasOwnProperty,X=function(t,e){return Y.call(t,e)},q=S("native-function-to-string",Function.toString),W=d((function(t){var e=x("src"),n=(""+q).split("toString");m.inspectSource=function(t){return q.call(t)},(t.exports=function(t,i,r,o){var s="function"==typeof r;s&&(X(r,"name")||U(r,"name",i)),t[i]!==r&&(s&&(X(r,e)||U(r,e,t[i]?""+t[i]:n.join(String(i)))),t===y?t[i]=r:o?t[i]?t[i]=r:U(t,i,r):(delete t[i],U(t,i,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||q.call(this)}))})),Z=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},J=function(t,e,n){var i,r,o,s,a=t&J.F,c=t&J.G,u=t&J.S,l=t&J.P,f=t&J.B,h=c?y:u?y[e]||(y[e]={}):(y[e]||{}).prototype,p=c?m:m[e]||(m[e]={}),d=p.prototype||(p.prototype={});for(i in c&&(n=e),n)o=((r=!a&&h&&void 0!==h[i])?h:n)[i],s=f&&r?Z(o,y):l&&"function"==typeof o?Z(Function.call,o):o,h&&W(h,i,o,t&J.U),p[i]!=o&&U(p,i,s),l&&d[i]!=o&&(d[i]=o)};y.core=m,J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128;var K=J;K({target:"RegExp",proto:!0,forced:P!==/./.exec},{exec:P});var Q=w("species"),tt=!N((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),et=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),nt=Math.max,it=Math.min,rt=Math.floor,ot=/\$([$&`']|\d\d?|<[^>]*>)/g,st=/\$([$&`']|\d\d?)/g;!function(t,e,n){var r=w(t),o=!N((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),s=o?!N((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Q]=function(){return n}),n[r](""),!e})):void 0;if(!o||!s||"replace"===t&&!tt||"split"===t&&!et){var a=/./[r],c=n(i,r,""[t],(function(t,e,n,i,r){return e.exec===P?o&&!r?{done:!0,value:a.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}})),u=c[0],l=c[1];W(String.prototype,t,u),U(RegExp.prototype,r,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}}("replace",2,(function(t,e,i,o){return[function(n,r){var o=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},function(t,e){var r=o(i,t,this,e);if(r.done)return r.value;var c=n(t),l=String(this),h="function"==typeof e;h||(e=String(e));var p=c.global;if(p){var d=c.unicode;c.lastIndex=0}for(var v=[];;){var g=C(c,l);if(null===g)break;if(v.push(g),!p)break;""===String(g[0])&&(c.lastIndex=f(l,u(c.lastIndex),d))}for(var m,y="",S=0,b=0;b<v.length;b++){g=v[b];for(var _=String(g[0]),x=nt(it(a(g.index),l.length),0),w=[],E=1;E<g.length;E++)w.push(void 0===(m=g[E])?m:String(m));var T=g.groups;if(h){var k=[_].concat(w,x,l);void 0!==T&&k.push(T);var D=String(e.apply(void 0,k))}else D=s(_,l,x,w,T,e);x>=S&&(y+=l.slice(S,x)+D,S=x+_.length)}return y+l.slice(S)}];function s(t,e,n,o,s,a){var c=n+t.length,u=o.length,l=st;return void 0!==s&&(s=r(s),l=ot),i.call(a,l,(function(i,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":a=s[r.slice(1,-1)];break;default:var l=+r;if(0===l)return i;if(l>u){var f=rt(l/10);return 0===f?i:f<=u?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):i}a=o[l-1]}return void 0===a?"":a}))}}));var at=w("unscopables"),ct=Array.prototype;null==ct[at]&&U(ct,at,{});var ut,lt=function(t){ct[at][t]=!0},ft=function(t,e){return{value:e,done:!!t}},ht={},pt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==p(t)?t.split(""):Object(t)},dt=function(t){return pt(i(t))},vt=Math.max,gt=Math.min,mt=S("keys"),yt=function(t){return mt[t]||(mt[t]=x(t))},St=(ut=!1,function(t,e,n){var i,r=dt(t),o=u(r.length),s=function(t,e){return(t=a(t))<0?vt(t+e,0):gt(t,e)}(n,o);if(ut&&e!=e){for(;o>s;)if((i=r[s++])!=i)return!0}else for(;o>s;s++)if((ut||s in r)&&r[s]===e)return ut||s||0;return!ut&&-1}),bt=yt("IE_PROTO"),_t=function(t,e){var n,i=dt(t),r=0,o=[];for(n in i)n!=bt&&X(i,n)&&o.push(n);for(;e.length>r;)X(i,n=e[r++])&&(~St(o,n)||o.push(n));return o},xt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),wt=Object.keys||function(t){return _t(t,xt)},Et=j?Object.defineProperties:function(t,e){n(t);for(var i,r=wt(e),o=r.length,s=0;o>s;)B.f(t,i=r[s++],e[i]);return t},Tt=y.document,kt=Tt&&Tt.documentElement,Ct=yt("IE_PROTO"),Dt=function(){},$t=function(){var t,e=F("iframe"),n=xt.length;for(e.style.display="none",kt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),$t=t.F;n--;)delete $t.prototype[xt[n]];return $t()},Ot=Object.create||function(t,e){var i;return null!==t?(Dt.prototype=n(t),i=new Dt,Dt.prototype=null,i[Ct]=t):i=$t(),void 0===e?i:Et(i,e)},Mt=B.f,Lt=w("toStringTag"),It=function(t,e,n){t&&!X(t=n?t:t.prototype,Lt)&&Mt(t,Lt,{configurable:!0,value:e})},Pt={};U(Pt,w("iterator"),(function(){return this}));var Nt=function(t,e,n){t.prototype=Ot(Pt,{next:H(1,n)}),It(t,e+" Iterator")},jt=yt("IE_PROTO"),At=Object.prototype,Rt=Object.getPrototypeOf||function(t){return t=r(t),X(t,jt)?t[jt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?At:null},Ft=w("iterator"),zt=!([].keys&&"next"in[].keys()),Vt=function(){return this},Gt=function(t,e,n,i,r,o,s){Nt(n,e,i);var a,c,u,l=function(t){if(!zt&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h="values"==r,p=!1,d=t.prototype,v=d[Ft]||d["@@iterator"]||r&&d[r],g=v||l(r),m=r?h?l("entries"):g:void 0,y="Array"==e&&d.entries||v;if(y&&(u=Rt(y.call(new t)))!==Object.prototype&&u.next&&(It(u,f,!0),"function"!=typeof u[Ft]&&U(u,Ft,Vt)),h&&v&&"values"!==v.name&&(p=!0,g=function(){return v.call(this)}),(zt||p||!d[Ft])&&U(d,Ft,g),ht[e]=g,ht[f]=Vt,r)if(a={values:h?g:l("values"),keys:o?g:l("keys"),entries:m},s)for(c in a)c in d||W(d,c,a[c]);else K(K.P+K.F*(zt||p),e,a);return a}(Array,"Array",(function(t,e){this._t=dt(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,ft(1)):ft(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");ht.Arguments=ht.Array,lt("keys"),lt("values"),lt("entries");for(var Bt=w("iterator"),Ht=w("toStringTag"),Ut=ht.Array,Yt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Xt=wt(Yt),qt=0;qt<Xt.length;qt++){var Wt,Zt=Xt[qt],Jt=Yt[Zt],Kt=y[Zt],Qt=Kt&&Kt.prototype;if(Qt&&(Qt[Bt]||U(Qt,Bt,Ut),Qt[Ht]||U(Qt,Ht,Zt),ht[Zt]=Ut,Jt))for(Wt in Gt)Qt[Wt]||W(Qt,Wt,Gt[Wt],!0)}var te={f:{}.propertyIsEnumerable},ee=Object.getOwnPropertyDescriptor,ne={f:j?ee:function(t,e){if(t=dt(t),e=V(e,!0),z)try{return ee(t,e)}catch(t){}if(X(t,e))return H(!te.f.call(t,e),t[e])}},ie=function(t,i){if(n(t),!e(i)&&null!==i)throw TypeError(i+": can't set as prototype!")},re={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=Z(Function.call,ne.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return ie(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:ie}.set,oe=function(t,n,i){var r,o=n.constructor;return o!==i&&"function"==typeof o&&(r=o.prototype)!==i.prototype&&e(r)&&re&&re(t,r),t},se=xt.concat("length","prototype"),ae={f:Object.getOwnPropertyNames||function(t){return _t(t,se)}},ce="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",ue="["+ce+"]",le=RegExp("^"+ue+ue+"*"),fe=RegExp(ue+ue+"*$"),he=function(t,e,n){var i={},r=N((function(){return!!ce[t]()||"âÂ"!="âÂ"[t]()})),o=i[t]=r?e(pe):ce[t];n&&(i[n]=o),K(K.P+K.F*r,"String",i)},pe=he.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(le,"")),2&e&&(t=t.replace(fe,"")),t},de=he,ve=ae.f,ge=ne.f,me=B.f,ye=de.trim,Se=y.Number,be=Se,_e=Se.prototype,xe="Number"==p(Ot(_e)),we="trim"in String.prototype,Ee=function(t){var e=V(t,!1);if("string"==typeof e&&e.length>2){var n,i,r,o=(e=we?e.trim():ye(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var s,a=e.slice(2),c=0,u=a.length;c<u;c++)if((s=a.charCodeAt(c))<48||s>r)return NaN;return parseInt(a,i)}}return+e};if(!Se(" 0o1")||!Se("0b1")||Se("+0x1")){Se=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Se&&(xe?N((function(){_e.valueOf.call(n)})):"Number"!=p(n))?oe(new be(Ee(e)),n,Se):Ee(e)};for(var Te,ke=j?ve(be):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Ce=0;ke.length>Ce;Ce++)X(be,Te=ke[Ce])&&!X(Se,Te)&&me(Se,Te,ge(be,Te));Se.prototype=_e,_e.constructor=Se,W(y,"Number",Se)}var De={name:"cmui-virtual-list",props:{listData:{type:Array,default:function(){return[]},intro:"åè¡¨æéè¦çæ°æ®"},column:{type:Number,default:1,intro:"åæ°"},topLoadMore:{type:Boolean,default:!1,intro:"æ¯å¦å¯ç¨ä¸æå·æ°"},topMethod:{type:Function,default:function(){return function(){}},intro:"å·æ°æ¶è°ç¨çåè°å½æ°"},topTextColor:{type:String,default:"#000000",intro:"å·æ°åºåçææ¬é¢è²"},topPullText:{type:String,default:"ä¸æå·æ°",intro:"å·æ°ç¶æä¸ºpullæ¶æç¤ºåºçæå­"},topDropText:{type:String,default:"éæ¾æ´æ°",intro:"å·æ°ç¶æä¸ºdropæ¶æç¤ºåºçæå­"},topLoadingText:{type:String,default:"å è½½ä¸­...",intro:"å·æ°ç¶æä¸ºloadingæ¶æç¤ºåºçæå­"},maxDistance:{type:Number,default:0,intro:"ç»ä»¶å¯ç§»å¨çæå¤§è·ç¦»ï¼åç´ ï¼ï¼è¥ä¸º 0 åä¸éå¶"},distanceScale:{type:Number,default:2,intro:"ææç§»å¨ä¸ç»ä»¶ç§»å¨è·ç¦»çæ¯å¼"},topDistance:{type:Number,default:70,intro:"è§¦å topMethod çä¸æè·ç¦»éå¼ï¼åç´ ï¼"},estimatedItemSize:{type:Number,required:!0,intro:"åè¡¨é¡¹çé¢ä¼°é«åº¦ï¼ç¨äºé¢åè®¡ç®å¯è§åºåçæ¾ç¤ºé¡¹æ°"},bufferScale:{type:Number,default:1,intro:"å¨å¯è§åºåä¹å¤çä¸/ä¸æ¹é¢æ¸²ææ¯ä¾ï¼é¿åå¿«éæ»å¨æ¶åºç°éªç"},height:{type:String,default:"100%",intro:"åè£¹åç´ çé«åº¦"}},data:function(){return{dargState:"none",touchDistance:0,scrolling:!1,screenHeight:0,start:0,end:0}},computed:{_listData:function(){var t=this;return this.listData.reduce((function(e,n,i){return i%t.column==0?e.push({_key:"_".concat(i/t.column,"_").concat(i,"_").concat(t.column),value:[n]}):e[e.length-1].value.push(n),e}),[])},anchorPoint:function(){return this.positions.length?this.positions[this.start]:null},visibleCount:function(){return Math.ceil(this.screenHeight/this.estimatedItemSize)},aboveCount:function(){return Math.min(this.start,this.bufferScale*this.visibleCount)},belowCount:function(){return Math.min(this.listData.length-this.end,this.bufferScale*this.visibleCount)},visibleData:function(){var t=this.start-this.aboveCount,e=this.end+this.belowCount;return this._listData.slice(t,e)}},watch:{},created:function(){this.initPositions(),this.setScrollState(!1)},mounted:function(){this.screenHeight=this.$el.clientHeight,this.start=0,this.end=this.start+this.visibleCount,this.setStartOffset(),this.topLoadMore&&(this.$refs.list.addEventListener("touchstart",this.touchStartEvent),this.$refs.list.addEventListener("touchmove",this.touchMoveEvent),this.$refs.list.addEventListener("touchend",this.touchEndEvent))},beforeDestroy:function(){this.topLoadMore&&(this.$refs.list.removeEventListener("touchstart",this.touchStartEvent),this.$refs.list.removeEventListener("touchmove",this.touchMoveEvent),this.$refs.list.removeEventListener("touchend",this.touchEndEvent))},updated:function(){"none"===this.dargState&&(this._listData.length!==this.positions.length&&this.initPositions(),this.$nextTick((function(){if(this.$refs.items&&this.$refs.items.length){this.updateItemsSize();var t=this.positions[this.positions.length-1].bottom;this.$refs.phantom.style.height=t+"px",this.setStartOffset()}})))},methods:{setScrollState:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.scrolling=t},scrollingEvent:function(t,e){this.onScroll&&this.onScroll(t,e)},initPositions:function(){var t=this;this.positions=this._listData.map((function(e,n){return{index:n,height:t.estimatedItemSize,top:n*t.estimatedItemSize,bottom:(n+1)*t.estimatedItemSize}}))},getStartIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.binarySearch(this.positions,t)},binarySearch:function(t,e){for(var n=0,i=t.length-1,r=null;n<=i;){var o=parseInt((n+i)/2),s=t[o].bottom;if(s===e)return o+1;s<e?n=o+1:s>e&&((null===r||r>o)&&(r=o),i-=1)}return r},updateItemsSize:function(){var t=this;this.$refs.items.forEach((function(e){var n=e.getBoundingClientRect().height,i=+e.id.replace(/^_(\d+).*/,"$1"),r=t.positions[i].height-n;if(r){t.positions[i].bottom=t.positions[i].bottom-r,t.positions[i].height=n,t.positions[i].over=!0;for(var o=i+1;o<t.positions.length;o++)t.positions[o].top=t.positions[o-1].bottom,t.positions[o].bottom=t.positions[o].bottom-r}}))},setStartOffset:function(){var t;if(this.start>=1){var e=this.positions[this.start].top-(this.positions[this.start-this.aboveCount]?this.positions[this.start-this.aboveCount].top:0);t=this.positions[this.start-1].bottom-e}else t=0;this.startOffset=t,this.$refs.content.style.transform="translate3d(0,".concat(t,"px,0)")},scrollEvent:function(t){var e=this.$refs.list.scrollTop;this.setScrollState(!0),(e>this.anchorPoint.bottom||e<this.anchorPoint.top)&&(this.start=this.getStartIndex(e),this.end=this.start+this.visibleCount,this.setStartOffset()),this.scrollingEvent(t,{start:this.start*this.column,end:Math.min(this.end*this.column,this.listData.length-1),startOffset:this.startOffset,scrollTop:e})},touchStartEvent:function(t){this.topLoadMore&&(this._startPos=t.touches[0].pageY,this._prevPos=t.touches[0].pageY)},touchMoveEvent:function(t){var e=this;if(this.topLoadMore)if("loading"!==this.dargState){var n=t.touches[0].pageY;if(!(n>this._prevPos&&0!==this.$refs.list.scrollTop)){if(n>this._prevPos&&0===this.$refs.list.scrollTop){this.touchDistance=Math.max(this.touchDistance+n-this._prevPos,0);var i=~~(this.touchDistance/this.distanceScale);if(i<this.topDistance&&(this.dargState="pull",this.$emit("top-status-change",this.dargState,i)),i>=this.topDistance&&(this.dargState="drop",this.$emit("top-status-change",this.dargState,i)),i<=this.maxDistance||!this.maxDistance){var r=this.maxDistance?Math.min(i,this.maxDistance):i;setTimeout((function(){e.$refs.content.style.transform="translate3d(0,".concat(r,"px,0)"),e.$refs.top.style.height="".concat(r,"px")}),0)}}if(!(n<this._prevPos)||this.touchDistance){if(n<this._prevPos&&this.touchDistance){this.touchDistance=Math.max(this.touchDistance+n-this._prevPos,0);var o=~~(this.touchDistance/this.distanceScale);if(o<this.topDistance&&(this.dargState="pull",this.$emit("top-status-change",this.dargState,o)),o>=this.topDistance&&(this.dargState="drop",this.$emit("top-status-change",this.dargState,o)),o<=this.maxDistance||!this.maxDistance){var s=this.maxDistance?Math.min(o,this.maxDistance):o;setTimeout((function(){e.$refs.content.style.transform="translate3d(0,".concat(s,"px,0)"),e.$refs.top.style.height="".concat(s,"px")}),0)}t.preventDefault()}this._prevPos=n}}}else t.preventDefault()},touchEndEvent:function(){var t=this;this.topLoadMore&&("pull"!==this.dargState&&"drop"!==this.dargState||("pull"===this.dargState&&(setTimeout((function(){t.dargState="none"}),300),this.touchDistance=0),"drop"===this.dargState&&(setTimeout((function(){t.dargState="loading"}),300),this.touchDistance=(this.topDistance-20)*this.distanceScale,this.topMethod&&this.topMethod()),this.$emit("top-status-change",this.dargState,~~(this.touchDistance/this.distanceScale)),this.$refs.content.style.transition="transform 0.3s",this.$refs.content.style.transform="translate3d(0,".concat(~~(this.touchDistance/this.distanceScale),"px,0)"),this.$refs.top.style.transition="height 0.3s",this.$refs.top.style.height="".concat(~~(this.touchDistance/this.distanceScale),"px"),setTimeout((function(){t.$refs.content.style.transition="",t.$refs.top.style.transition=""}),350)))},onBottomLoaded:function(){var t=this;this.touchDistance=0,this.$emit("top-status-change",this.dargState,~~(this.touchDistance/this.distanceScale)),this.$refs.content.style.transition="transform 0.2s",this.$refs.content.style.transform="translate3d(0,".concat(~~(this.touchDistance/this.distanceScale),"px,0)"),this.$refs.top.style.transition="height 0.2s",this.$refs.top.style.height="0px",this.dargState="none",setTimeout((function(){t.$refs.content.style.transition="",t.$refs.top.style.transition=""}),250)}}};function $e(t,e,n,i,r,o,s,a,c,u){"boolean"!=typeof s&&(c=a,a=s,s=!1);const l="function"==typeof n?n.options:n;let f;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,r&&(l.functional=!0)),i&&(l._scopeId=i),o?(f=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=f):e&&(f=s?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),f)if(l.functional){const t=l.render;l.render=function(e,n){return f.call(n),t(e,n)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,f):[f]}return n}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".infinite-top-content{height:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.infinite-top-content,.infinite-top-content-icon{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.infinite-top-content-icon{-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s, -webkit-transform .2s;transition:transform .2s,-webkit-transform .2s}.icon-arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.icon-arrow.icon-reverse{-webkit-transform:rotate(1turn);transform:rotate(1turn)}.icon-revolve{-webkit-animation:revolve 1.2s linear infinite;animation:revolve 1.2s linear infinite}@-webkit-keyframes revolve{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes revolve{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.infinite-top-content-title{font-size:14px}.infinite-top-container{-webkit-transform:translateZ(0);transform:translateZ(0);position:relative;z-index:2}.infinite-list-container{overflow-x:hidden;width:100%;overflow-y:auto;position:relative;-webkit-overflow-scrolling:touch}.infinite-list-phantom{z-index:-1}.infinite-list,.infinite-list-phantom{position:absolute;left:0;top:0;right:0}.infinite-list{z-index:1}.infinite-list-item-container{display:-webkit-box;display:-webkit-flex;display:flex}.infinite-item{-webkit-box-flex:1;-webkit-flex:1;flex:1}");const Oe=De;var Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"parent"},[n("div",{ref:"list",staticClass:"infinite-list-container",style:{height:t.height},on:{scroll:function(e){return t.scrollEvent(e)}}},[n("div",{ref:"phantom",staticClass:"infinite-list-phantom"}),t._v(" "),t.topLoadMore?n("div",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.dargState&&t.touchDistance>=20,expression:"dargState !== 'none' && touchDistance >= 20"}],ref:"top",staticClass:"infinite-top-container"},[t._t("top",[n("div",{staticClass:"infinite-top-content",style:{color:t.topTextColor}},["pull"===t.dargState||"drop"===t.dargState?n("span",{staticClass:"infinite-top-content-icon icon-arrow",class:"drop"===t.dargState?"icon-reverse":""},[n("svg",{staticClass:"icon",attrs:{t:"1572934878285",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4245",width:"24",height:"24"}},[n("path",{attrs:{d:"M548.352 241.152L716.8 409.6a32.768 32.768 0 0 1 0 46.592 30.72 30.72 0 0 1-45.568 0l-116.736-115.2v464.896a32.768 32.768 0 1 1-65.024 0V340.992L372.736 460.8a39.424 39.424 0 0 1-45.568-6.656 32.768 32.768 0 0 1 0-46.592l162.816-166.4a35.328 35.328 0 0 1 58.368 0z",fill:t.topTextColor,"p-id":"4246"}})])]):t._e(),t._v(" "),"loading"===t.dargState?n("span",{staticClass:"infinite-top-content-icon icon-revolve"},[n("svg",{staticClass:"icon",attrs:{t:"1572936012117",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9195",width:"32",height:"32"}},[n("path",{attrs:{d:"M527.36 225.28h-30.72c-8.192 0-15.36 7.168-15.36 15.36v133.12c0 8.192 7.168 15.36 15.36 15.36h30.72c8.192 0 15.36-7.168 15.36-15.36v-133.12c0-8.192-7.168-15.36-15.36-15.36z m256 256h-133.12c-8.192 0-15.36 7.168-15.36 15.36v30.72c0 8.192 7.168 15.36 15.36 15.36h133.12c8.192 0 15.36-7.168 15.36-15.36v-30.72c0-8.192-7.168-15.36-15.36-15.36z m-256 153.6h-30.72c-8.192 0-15.36 7.168-15.36 15.36v133.12c0 8.192 7.168 15.36 15.36 15.36h30.72c8.192 0 15.36-7.168 15.36-15.36v-133.12c0-8.192-7.168-15.36-15.36-15.36zM389.12 527.36v-30.72c0-8.192-7.168-15.36-15.36-15.36h-133.12c-8.192 0-15.36 7.168-15.36 15.36v30.72c0 8.192 7.168 15.36 15.36 15.36h133.12c8.192 0 15.36-7.168 15.36-15.36z m220.16-91.136c6.144 6.144 15.36 6.144 21.504 0l94.208-94.208c6.144-6.144 6.144-15.36 0-21.504l-21.504-21.504c-6.144-6.144-15.36-6.144-21.504 0l-94.208 94.208c-6.144 6.144-6.144 15.36 0 21.504l21.504 21.504z m22.528 151.552c-6.144-6.144-15.36-6.144-21.504 0l-21.504 21.504c-6.144 6.144-6.144 15.36 0 21.504l94.208 94.208c6.144 6.144 15.36 6.144 21.504 0l21.504-21.504c6.144-6.144 6.144-15.36 0-21.504l-94.208-94.208z m-217.088 0c-6.144-6.144-15.36-6.144-21.504 0l-94.208 94.208c-6.144 6.144-6.144 15.36 0 21.504l21.504 21.504c6.144 6.144 15.36 6.144 21.504 0l94.208-94.208c6.144-6.144 6.144-15.36 0-21.504l-21.504-21.504z m-72.704-289.792c-6.144-6.144-15.36-6.144-21.504 0l-21.504 21.504c-6.144 6.144-6.144 15.36 0 21.504l94.208 94.208c6.144 6.144 15.36 6.144 21.504 0l21.504-21.504c6.144-6.144 6.144-15.36 0-21.504l-94.208-94.208z",fill:t.topTextColor,"p-id":"9196"}})])]):t._e(),t._v(" "),n("span",{staticClass:"infinite-top-content-title"},["pull"===t.dargState?[t._v("\n            "+t._s(t.topPullText)+"\n          ")]:t._e(),t._v(" "),"drop"===t.dargState?[t._v("\n             "+t._s(t.topDropText)+"\n          ")]:t._e(),t._v(" "),"loading"===t.dargState?[t._v("\n            "+t._s(t.topLoadingText)+"\n          ")]:t._e()],2)])],{dargState:t.dargState,dargDistance:t.touchDistance})],2):t._e(),t._v(" "),n("div",{ref:"content",staticClass:"infinite-list"},t._l(t.visibleData,(function(e,i){return n("div",{key:e._key,ref:"items",refInFor:!0,staticClass:"infinite-list-item-container",attrs:{id:e._key}},[t._l(e.value,(function(r,o){return[n("div",{key:e._key+"-"+o,staticClass:"infinite-item"},[t._t("default",null,{item:r,row:i,col:o})],2)]})),t._v(" "),e.value.length<t.column?t._l(t.column-e.value.length%t.column,(function(t,e){return n("div",{key:"empty-"+e,staticClass:"infinite-item"})})):t._e()],2)})),0)])])};Me._withStripped=!0;const Le=$e({render:Me,staticRenderFns:[]},void 0,Oe,void 0,!1,void 0,!1,void 0,void 0,void 0);return Le.install=function(t,e){t.component(Le.name,Le)},Le}));
